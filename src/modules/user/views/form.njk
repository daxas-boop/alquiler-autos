{% extends 'views/layout/base.njk' %}

{% block body %}
  <div class="container">
    {% if user %}
      <h2 class="title has-text-centered mt-5">Edita el usuario {{user.name}} {{user.surname}}</h2>
    {% else %}
      <h2 class="title has-text-centered mt-5">Agregá un nuevo usuario</h2>
    {% endif %}

    <form class="mt-5" action="/users/save" method="POST" enctype="application/x-www-form-urlencoded">
      <input type="hidden" name="id" value="{{user.id}}" >

      <div class="field">
        <label for="name" class="label">Nombre</label>
        <div class="control has-icons-left">
          <input class="input" name="name" type="text" placeholder="Nombre" value="{{user.name}}" required>
          <span class="icon is-small is-left">
            <i class="fas fa-user"></i>
          </span>
        </div>
      </div>

      <div class="field">
        <label for="surname" class="label">Apellido</label>
        <p class="control has-icons-left">
          <input class="input" name="surname" type="text" placeholder="Apellido" value="{{user.surname}}" required>
          <span class="icon is-small is-left">
            <i class="fas fa-user"></i>
          </span>
        </p>
      </div>

      <div class="field">
        <label for="document_type" class="label">Tipo Documento</label>
        <p class="control has-icons-left">
          <input class="input" name="document_type" type="text" placeholder="Tipo Documento" value="{{user.documentType}}" required>
          <span class="icon is-small is-left">
            <i class="fas fa-address-card"></i>
          </span>
        </p>
      </div>

      <div class="field">
        <label for="document_number" class="label">Numero Documento</label>
        <p class="control has-icons-left">
          <input class="input" name="document_number" type="number" placeholder="Numero Documento" value="{{user.documentNumber}}" min="0" required>
          <span class="icon is-small is-left">
            <i class="fas fa-address-card"></i>
          </span>
        </p>
      </div>

      <div class="field">
        <label for="nationality" class="label">Nacionalidad</label>
        <p class="control has-icons-left">
          <input class="input" name="nationality" type="text" placeholder="Nacionalidad" value="{{user.nationality}}" required>
          <span class="icon is-small is-left">
            <i class="far fa-flag"></i>
          </span>
        </p>
      </div>

      <div class="field">
        <label for="address" class="label">Dirección</label>
        <p class="control has-icons-left">
          <input class="input" name="address" type="text" placeholder="Direccion" value="{{user.address}}" required>
          <span class="icon is-small is-left">
            <i class="fas fa-map-marked"></i>
          </span>
        </p>
      </div>

      <div class="field">
        <label for="phone" class="label">Telefono</label>
        <p class="control has-icons-left">
          <input class="input" name="phone" type="text" placeholder="Telefono" value="{{user.phone}}" required>
          <span class="icon is-small is-left">
            <i class="fas fa-phone"></i>
          </span>
        </p>
      </div>

      <div class="field">
        <label for="email" class="label">E-mail</label>
        <p class="control has-icons-left">
          <input class="input" name="email" type="email" placeholder="E-mail" value="{{user.email}}" required>
          <span class="icon is-small is-left">
            <i class="fas fa-at"></i>
          </span>
        </p>
      </div>

      <div class="field">
        <label for="birthdate" class="label">Nacimiento</label>
        <p class="control has-icons-left">
          {% if user.birthdate %}
          <input class="input" name="birthdate" type="date" placeholder="Nacimiento" 
          value="{{user.birthdate.toISOString().split('T')[0]}}" required>
          {% else %}
          <input class="input" name="birthdate" type="date" placeholder="Nacimiento" required>
          {% endif %}
          <span class="icon is-small is-left">
            <i class="fas fa-birthday-cake"></i>
          </span>
        </p>
      </div>

      <div class="field  is-grouped is-grouped-centered">
        <p class="control">
          <button class="button is-success my-4">
            Guardar
          </button>
          <a href="/users" class="button my-4 ml-3">
            Volver atras
          </a>
        </p>
      </div>

    </form>
  </div>
{% endblock %}