{% extends 'views/layout/base.html' %}

{% block body %}
  <h2 class="title has-text-centered mt-3">Administrá los autos</h2>

  <a href="/cars/create" class="button is-primary my-5">Agrega un auto</a>

  {% for message in messages %}
    <div class="notification is-primary is-light my-3">
      {{message}}
    </div>
  {% endfor %}

  {% for error in errors %}
    <div class="notification is-danger is-light">
      {{error}}
    </div>
  {% endfor %}
  
  <div class="table-container">
    <table class="table is-striped is-narrow is-hoverable is-fullwidth">
      <thead>
        <tr>
          <th class="has-text-centered">Imagen</th>
          <th class="has-text-centered">Marca</th>
          <th class="has-text-centered">Modelo</th>
          <th class="has-text-centered">Año</th>
          <th class="has-text-centered">Kilometros</th>
          <th class="has-text-centered">Color</th>
          <th class="has-text-centered">Aire</th>
          <th class="has-text-centered">Pasajeros</th>
          <th class="has-text-centered">Transmision</th>
          <th class="has-text-centered">Precio Por Dia</th>
          <th class="has-text-centered">Acciones</th>
        </tr>
      </thead>
      <tbody>
      {% for car in data.cars %}
        <tr>
          <th class="has-text-centered">
            <span class="buttons is-centered">
              <figure class="image is-128x128">
                <img class="image is-128x128 my-1" src="/{{car.image}}" >
              </figure>
            </span>
          </th>
          <td class="has-text-centered">
            <span class="my-6 tag is-size-6">
              {{car.brand}}
            </span>
          </td>
          <td class="has-text-centered">
            <span class="my-6 tag is-size-6">
              {{car.model}}
            </span>
          </td>
          <td class="has-text-centered">
            <span class="my-6 tag is-size-6">
              {{car.year}}
            </span>
          </td>
          <td class="has-text-centered">
            <span class="my-6 tag is-size-6">
              {{car.mileage}}
            </span>
          </td>
          <td class="has-text-centered">
            <span class="my-6 tag is-size-6">
              {{car.color}}
            </span>
          </td>
          <td class="has-text-centered">
            <span class="my-6 tag is-size-6">
            {% if car.airConditioning %}
              Si
            {% else %}
              No
            {% endif %}
            </span>
          </td>
          <td class="has-text-centered">
            <span class="my-6 tag is-size-6">
              {{car.passengers}}
            </span>
          </td>
          <td class="has-text-centered">
            <span class="my-6 tag is-size-6">
              {{car.transmission}}
            </span>
          </td>
          <td class="has-text-centered">
            <span class="my-6 tag is-size-6">
              {{car.priceDay}} $
            </span>
          </td>
          <td>
            <span class="is-flex my-6">
              <a href="/cars/edit/{{car.id}}" class="button is-primary mx-2">Editar</a>
              <a data-id={{car.id}} data-brand={{car.brand}} data-model={{car.model}} id="delete-btn" class="button is-danger">Eliminar</a>
            </span>
          </td>
        </tr>
      {% endfor %}
      </tbody>
    </table>
  </div>
  <div id="prompt-container"></div>

  <script src="./public/js/prompt-delete-car.js"></script>

{% endblock %}